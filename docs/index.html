<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>revolt-bot-base documentation</title>
        <style>
            body {
                margin:0;
                background:#171717;
                color:#ebebeb;
                font-family:sans-serif;
                font-size:1.2rem;
                line-height:1.5rem;
                margin-left:1rem;
                width:calc(100% - 2rem);
            }
            h2 {
                margin-bottom:0.5rem;
            }
            section {
                border-bottom:2px solid #ebebeb;
                padding-bottom:2rem;
                margin-bottom:2rem;
            }
            a:link {
                color:lightskyblue;
            }
            a:hover {
                color:deepskyblue;
            }
            a:visited {
                color:orchid;
            }
            .e {
                font-family:monospace;
                border:3px solid white;
                border-radius:1rem;
                background:black;
                padding:1rem;
                display:inline-block;
                font-weight:bold;
                margin-top:1rem;
                margin-bottom:1rem;
            }
            .s {
                color:chocolate;
            }
            .a {
                color:lightblue;
            }
            .b {
                color:orchid;
            }
            .t {
                color:lightgreen;
            }
            .c {
                color:deepskyblue;
            }
            .n {
                color:orange;
            }
            .d {
                color:gray;
            }
            :nth-child(even of .g>span) {
                color:lightskyblue;
            }
        </style>
    </head>
    <body>
        <header>
            <h1>revolt-bot-base documentation</h1>
        </header>
        <main>
            <section>
                <h2>Jump to section</h2>
                <ul>
                    <li><a href="#install">Install</a></li>
                    <li><a href="#configure">Configure bot</a></li>
                    <li><a href="#send">Register "Send" action command</a></li>
                    <li><a href="#remove">Register "Remove" action command</a></li>
                    <li><a href="#poll">Register "Poll" action command</a></li>
                    <li><a href="#role">Register "AddRole" action command</a></li>
                    <li><a href="#kick">Register "Kick" action command</a></li>
                    <li><a href="#ban">Register "Ban" action command</a></li>
                    <li><a href="#start">Start bot</a></li>
                    <li><a href="#example">Example bot</a></li>
                </ul>
                <p>
                    Tool to simplify the creation of basic revolt bots.
                </p>
                <strong>Links:</strong><br>
                <a target="_blank" href="https://github.com/AstronomyOverdrive/revolt-bot-base">GitHub</a> |
                <a target="_blank" href="https://www.npmjs.com/package/@astronomyoverdrive/revolt-bot-base">NPM</a>
            </section>

            <section id="install">
                <h2>Install</h2>
                <div class="e">
                    $ npm install @astronomyoverdrive/revolt-bot-base
                </div><br>
                (This will also install <a target="_blank" href="https://www.npmjs.com/package/ws">ws</a>)
            </section>

            <section id="configure">
                <h2>Configure bot</h2>
                <strong><em>Must be before commands</em></strong><br>
                <div class="e">
                    ConfigureBot({<br>
&nbsp;                  botToken: "TOKEN",<br>
&nbsp;                  botUserId: "USER_ID",<br>
&nbsp;                  serverId: "SERVER_ID",<br>
&nbsp;                  APILogs: false,<br>
&nbsp;                  chatLogs: "",<br>
&nbsp;                  prefix: "",<br>
&nbsp;                  removeCaller: false,<br>
&nbsp;                  badWords: [],<br>
&nbsp;                  blockEmbeds: false,<br>
&nbsp;                  blockAttachments: false,<br>
&nbsp;                  badWordLevel: 3,<br>
&nbsp;                  embedLevel: 2,<br>
&nbsp;                  attachmentLevel: 1<br>
                    });
                </div><br>
                <div class="g">
                    <span><strong>botToken</strong> = Your bots token. String</span>
                    <br>
                    <span><strong>botUserId</strong> = Your bots User ID. String</span>
                    <br>
                    <span><strong>serverId</strong> = Your servers Server ID. String</span>
                    <br>
                    <span><strong>APILogs</strong> = Log socket events &amp; API responses? Boolean</span>
                    <br>
                    <span><strong>chatLogs</strong> = Log messages to separate channel? String, either Channel ID or empty to disable</span>
                    <br>
                    <span><strong>prefix</strong> = Prefix for commands. String</span>
                    <br>
                    <span><strong>removeCaller</strong> = Remove message that triggered a command? Boolean</span>
                    <br>
                    <span><strong>badWords</strong> = Words to automod. Array with lowercase strings or regex, /\bword\b/ to match whole words</span>
                    <br>
                    <span><strong>blockEmbeds</strong> = Should bot automod embeds? Boolean</span>
                    <br>
                    <span><strong>blockAttachments</strong> = Should bot automod attachments? Boolean</span>
                    <br>
                    <span><strong>badWordLevel</strong> = What action to take against users using bad words? Integer, 1-3*</span>
                    <br>
                    <span><strong>embedLevel</strong> = What action to take against users using embeds? Integer, 1-3*</span>
                    <br>
                    <span><strong>attachmentLevel</strong> = What action to take against users using attachments? Integer, 1-3*</span><br>
                    * 1 = Warn, 2 = Kick, 3 = Ban
                </div>
            </section>

            <section id="send">
                <h2>Register "Send" action command</h2>
                <div class="e">
                    RegisterCommand({<br>
&nbsp;                  usePrefix: true,<br>
&nbsp;                  command: "command",<br>
&nbsp;                  action: "Send",<br>
&nbsp;                  allowedRoles: [],<br>
&nbsp;                  allowedChannels: [],<br>
&nbsp;                  targetChannel: "",<br>
&nbsp;                  contents: ""<br>
                    });
                </div><br>
                <div class="g">
                    <span><strong>usePrefix</strong> = Require prefix for this command? Boolean</span>
                    <br>
                    <span><strong>command</strong> = What should the actual command be? String</span>
                    <br>
                    <span><strong>action</strong> = What action should the command trigger? String, valid action</span>
                    <br>
                    <span><strong>allowedRoles</strong> = What roles can use this command? Array with Role IDs or empty to allow everyone</span>
                    <br>
                    <span><strong>allowedChannels</strong> = Where can this command be used? Array with Channel IDs or empty to allow it everywhere</span>
                    <br>
                    <span><strong>targetChannel</strong> = Where should the message be sent? String, either Channel ID or empty to use same channel as sender</span>
                    <br>
                    <span><strong>contents</strong> = What text to send? String with message or empty string to use the text after "!command" from sender</span>
                </div>
            </section>

            <section id="remove">
                <h2>Register "Remove" action command</h2>
                <strong><em>Uses "[command] [message-link]" syntax</em></strong><br>
                <div class="e">
                    RegisterCommand({<br>
&nbsp;                  usePrefix: true,<br>
&nbsp;                  command: "command",<br>
&nbsp;                  action: "Remove",<br>
&nbsp;                  allowedRoles: [],<br>
&nbsp;                  allowedChannels: []<br>
                    });
                </div><br>
                <div class="g">
                    <span><strong>usePrefix</strong> = Require prefix for this command? Boolean</span>
                    <br>
                    <span><strong>command</strong> = What should the actual command be? String</span>
                    <br>
                    <span><strong>action</strong> = What action should the command trigger? String, valid action</span>
                    <br>
                    <span><strong>allowedRoles</strong> = What roles can use this command? Array with Role IDs or empty to allow everyone</span>
                    <br>
                    <span><strong>allowedChannels</strong> = Where can this command be used? Array with Channel IDs or empty to allow it everywhere</span>
                </div>
            </section>

            <section id="poll">
                <h2>Register "Poll" action command</h2>
                <div class="e">
                    RegisterCommand({<br>
&nbsp;                  usePrefix: true,<br>
&nbsp;                  command: "command",<br>
&nbsp;                  action: "Poll",<br>
&nbsp;                  allowedRoles: [],<br>
&nbsp;                  allowedChannels: [],<br>
&nbsp;                  targetChannel: "",<br>
&nbsp;                  contents: ""<br>
                    });
                </div><br>
                <div class="g">
                    <span><strong>usePrefix</strong> = Require prefix for this command? Boolean</span>
                    <br>
                    <span><strong>command</strong> = What should the actual command be? String</span>
                    <br>
                    <span><strong>action</strong> = What action should the command trigger? String, valid action</span>
                    <br>
                    <span><strong>allowedRoles</strong> = What roles can use this command? Array with Role IDs or empty to allow everyone</span>
                    <br>
                    <span><strong>allowedChannels</strong> = Where can this command be used? Array with Channel IDs or empty to allow it everywhere</span>
                    <br>
                    <span><strong>targetChannel</strong> = Where should the message be sent? String, either Channel ID or empty to use same channel as sender</span>
                    <br>
                    <span><strong>contents</strong> = What text to send? String with message or empty string to use the text after "!command" from sender</span>
                </div>
            </section>

            <section id="role">
                <h2>Register "AddRole" action command</h2>
                <strong><em>Currently only applies the role to the sender of the command</em></strong><br>
                <div class="e">
                    RegisterCommand({<br>
&nbsp;                  usePrefix: true,<br>
&nbsp;                  command: "command",<br>
&nbsp;                  action: "AddRole",<br>
&nbsp;                  allowedRoles: [],<br>
&nbsp;                  allowedChannels: [],<br>
&nbsp;                  contents: ""<br>
                    });
                </div><br>
                <div class="g">
                    <span><strong>usePrefix</strong> = Require prefix for this command? Boolean</span>
                    <br>
                    <span><strong>command</strong> = What should the actual command be? String</span>
                    <br>
                    <span><strong>action</strong> = What action should the command trigger? String, valid action</span>
                    <br>
                    <span><strong>allowedRoles</strong> = What roles can use this command? Array with Role IDs or empty to allow everyone</span>
                    <br>
                    <span><strong>allowedChannels</strong> = Where can this command be used? Array with Channel IDs or empty to allow it everywhere</span>
                    <br>
                    <span><strong>contents</strong> = What role to add? String with Role ID</span>
                </div>
            </section>

            <section id="kick">
                <h2>Register "Kick" action command</h2>
                <strong><em>Uses "[command] &lt;@userid&gt; reason" syntax</em></strong><br>
                <div class="e">
                    RegisterCommand({<br>
&nbsp;                  usePrefix: true,<br>
&nbsp;                  command: "command",<br>
&nbsp;                  action: "Kick",<br>
&nbsp;                  allowedRoles: [],<br>
&nbsp;                  allowedChannels: []<br>
                    });
                </div><br>
                <div class="g">
                    <span><strong>usePrefix</strong> = Require prefix for this command? Boolean</span>
                    <br>
                    <span><strong>command</strong> = What should the actual command be? String</span>
                    <br>
                    <span><strong>action</strong> = What action should the command trigger? String, valid action</span>
                    <br>
                    <span><strong>allowedRoles</strong> = What roles can use this command? Array with Role IDs or empty to allow everyone</span>
                    <br>
                    <span><strong>allowedChannels</strong> = Where can this command be used? Array with Channel IDs or empty to allow it everywhere</span>
                </div>
            </section>

            <section id="ban">
                <h2>Register "Ban" action command</h2>
                <strong><em>Uses "[command] &lt;@userid&gt; reason" syntax</em></strong><br>
                <div class="e">
                    RegisterCommand({<br>
&nbsp;                  usePrefix: true,<br>
&nbsp;                  command: "command",<br>
&nbsp;                  action: "Ban",<br>
&nbsp;                  allowedRoles: [],<br>
&nbsp;                  allowedChannels: []<br>
                    });
                </div><br>
                <div class="g">
                    <span><strong>usePrefix</strong> = Require prefix for this command? Boolean</span>
                    <br>
                    <span><strong>command</strong> = What should the actual command be? String</span>
                    <br>
                    <span><strong>action</strong> = What action should the command trigger? String, valid action</span>
                    <br>
                    <span><strong>allowedRoles</strong> = What roles can use this command? Array with Role IDs or empty to allow everyone</span>
                    <br>
                    <span><strong>allowedChannels</strong> = Where can this command be used? Array with Channel IDs or empty to allow it everywhere</span>
                </div>
            </section>

            <section id="start">
                <h2>Start bot</h2>
                <strong><em>Must be after commands</em></strong><br>
                <div class="e">
                    startBot();
                </div>
            </section>

            <section id="example">
                <h2>Example bot</h2>
                <div class="e">
                    const bot = require("@astronomyoverdrive/revolt-bot-base");<br><br>

                    bot.ConfigureBot({<br>
&nbsp;                  botToken: "YOUR_BOT_TOKEN", /* Found in Settings -> My Bots */<br>
&nbsp;                  botUserId: "YOUR_BOT_USER_ID", /* Found in Settings -> My Bots */<br>
&nbsp;                  serverId: "YOUR_SERVER_ID", /* Right-click server -> Copy server ID */<br>
&nbsp;                  APILogs: false, /* Don't show events/responses in terminal */<br>
&nbsp;                  chatLogs: "", /* Don't keep a log of users messages */<br>
&nbsp;                  prefix: "!", /* Use ! as command prefix */<br>
&nbsp;                  removeCaller: true, /* Remove the message that triggered the command */<br>
&nbsp;                  badWords: [/\bemacs\b/, "vscode"], /* Remove messages with these words */<br>
&nbsp;                  blockEmbeds: true, /* Remove messages trying to embed links */<br>
&nbsp;                  blockAttachments: true, /* Remove messages using attachments */<br>
&nbsp;                  badWordLevel: 3, /* Ban users using bad words */<br>
&nbsp;                  embedLevel: 1, /* Warn users using embed */<br>
&nbsp;                  attachmentLevel: 1 /* Warn users using attachment */<br>
                    });<br><br>

                    /* Get Role IDs with Server settings -> Roles -> ROLE ID */<br>
                    /* Get Channel IDs with Right-click channel -> Copy channel ID */<br>
                    /* Get User IDs with Right-click user -> Copy user ID */<br><br>

                    /* !live */<br>
                    bot.RegisterCommand({<br>
&nbsp;                  usePrefix: true,<br>
&nbsp;                  command: "live",<br>
&nbsp;                  action: "Send",<br>
&nbsp;                  allowedRoles: ["STAFF_ROLE_ID"],<br>
&nbsp;                  allowedChannels: ["STAFF_BOT_CHANNEL_ID"],<br>
&nbsp;                  targetChannel: "LIVE_CHANNEL_ID",<br>
&nbsp;                  contents: "&lt;@USER_ID&gt; is now live at [TEXT](URL)"<br>
                    });<br><br>

                    /* !announce what to announce */<br>
                    bot.RegisterCommand({<br>
&nbsp;                  usePrefix: true,<br>
&nbsp;                  command: "announce",<br>
&nbsp;                  action: "Send",<br>
&nbsp;                  allowedRoles: ["STAFF_ROLE_ID"],<br>
&nbsp;                  allowedChannels: ["STAFF_BOT_CHANNEL_ID"],<br>
&nbsp;                  targetChannel: "SERVER_ANNOUNCEMENTS_CHANNEL_ID",<br>
&nbsp;                  contents: ""<br>
                    });<br><br>

                    /* !poll what to vote on */<br>
                    bot.RegisterCommand({<br>
&nbsp;                  usePrefix: true,<br>
&nbsp;                  command: "poll",<br>
&nbsp;                  action: "Poll",<br>
&nbsp;                  allowedRoles: [],<br>
&nbsp;                  allowedChannels: [],<br>
&nbsp;                  targetChannel: "",<br>
&nbsp;                  contents: ""<br>
                    });<br><br>

                    /* !remove (message-link) */<br>
                    bot.RegisterCommand({<br>
&nbsp;                  usePrefix: true,<br>
&nbsp;                  command: "remove",<br>
&nbsp;                  action: "Remove",<br>
&nbsp;                  allowedRoles: ["STAFF_ROLE_ID"],<br>
&nbsp;                  allowedChannels: ["STAFF_BOT_CHANNEL_ID"]<br>
                    });<br><br>

                    /* !kick &lt;@userid&gt; reason */<br>
                    bot.RegisterCommand({<br>
&nbsp;                  usePrefix: true,<br>
&nbsp;                  command: "kick",<br>
&nbsp;                  action: "Kick",<br>
&nbsp;                  allowedRoles: ["STAFF_ROLE_ID"],<br>
&nbsp;                  allowedChannels: ["STAFF_BOT_CHANNEL_ID"]<br>
                    });<br><br>

                    /* !ban &lt;@userid&gt; reason */<br>
                    bot.RegisterCommand({<br>
&nbsp;                  usePrefix: true,<br>
&nbsp;                  command: "ban",<br>
&nbsp;                  action: "Ban",<br>
&nbsp;                  allowedRoles: ["STAFF_ROLE_ID"],<br>
&nbsp;                  allowedChannels: ["STAFF_BOT_CHANNEL_ID"]<br>
                    });<br><br>

                    /* Accept */<br>
                    bot.RegisterCommand({<br>
&nbsp;                  usePrefix: false,<br>
&nbsp;                  command: "Accept",<br>
&nbsp;                  action: "AddRole",<br>
&nbsp;                  allowedRoles: [],<br>
&nbsp;                  allowedChannels: ["WELCOME_CHANNEL_ID"],<br>
&nbsp;                  contents: "MEMBER_ROLE_ID"<br>
                    });<br><br>

                    bot.startBot();
                </div>
            </section>
        </main>

        <script>
            "use strict";
            const CodeBlocks = document.querySelectorAll(".e");
            CodeBlocks.forEach(CodeBlock => {
                let contents = '<span class="c">' + CodeBlock.innerHTML
                .replaceAll('const', '</span><span class="c">const</span>')
                .replaceAll('require', '<span class="b">require</span>')
                .replaceAll('$', '</span><span class="t">$</span>')
                .replaceAll('bot.', '</span><span class="b">bot</span>.')
                .replaceAll('.', '.<span class="c">')
                .replaceAll('({', '</span>({')
                .replaceAll('("', '(<span class="t">"')
                .replaceAll(' "', ' <span class="t">"')
                .replaceAll('["', '[<span class="t">"')
                .replaceAll('",', '"</span>,')
                .replaceAll('"]', '"</span>]')
                .replaceAll('")', '"</span>)')
                .replaceAll('()', '</span>()')
                .replaceAll('"<br>', '"</span><br>')
                .replaceAll('true', '<span class="b">true</span>')
                .replaceAll('false', '<span class="b">false</span>')
                .replaceAll('&nbsp;', '&nbsp;&nbsp;&nbsp;<span class="a">')
                .replaceAll(':', '</span>:')
                .replaceAll('[', '<span class="s">[</span>')
                .replaceAll('[</span>T', '</span>[T')
                .replaceAll(']', '<span class="s">]</span>')
                .replaceAll(']</span>(', '</span>](')
                .replaceAll('1', '<span class="n">1</span>')
                .replaceAll('2', '<span class="n">2</span>')
                .replaceAll('3', '<span class="n">3</span>')
                .replaceAll('/*', '<span class="d">/*')
                .replaceAll('*/', '*/</span>');
                CodeBlock.innerHTML = contents;
            });
        </script>
    </body>
</html>
